(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6723:function(e,t,s){Promise.resolve().then(s.bind(s,9942))},9942:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(6764),n=s(7481),r=s(2761),l=s(5332),i=s(2931);function o(){let[e,t]=(0,n.useState)("run"),[s,o]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[d,h]=(0,n.useState)("idle"),[f,m]=(0,n.useState)("idle"),g=(0,n.useRef)(null),p=(0,r.useRouter)();async function y(){try{let e=localStorage.getItem("gz_full_results"),t=localStorage.getItem("gz_full_hash");if(!e||!t){let a=localStorage.getItem("gz_full_runs"),n=(a?JSON.parse(a):{})[s];if(n)e=JSON.stringify(n),t=s,localStorage.setItem("gz_full_results",e),localStorage.setItem("gz_full_hash",t);else try{let a=await fetch("/api/runs?hash=".concat(encodeURIComponent(s)));if(a.ok){let n=await a.json(),r=Array.isArray(null==n?void 0:n.results)?n.results:null;if(r){e=JSON.stringify(r),t=s,localStorage.setItem("gz_full_results",e),localStorage.setItem("gz_full_hash",t);try{let e=localStorage.getItem("gz_full_runs"),t=e?JSON.parse(e):{};t[s]=r,localStorage.setItem("gz_full_runs",JSON.stringify(t))}catch(e){}}}}catch(e){}}if(!e||!t){try{let e=await fetch("/api/tests/by-hash?hash=".concat(encodeURIComponent(s)));if(e.ok){let t=await e.json(),s=null==t?void 0:t.id;if(s){p.push("/result/".concat(encodeURIComponent(s)));return}}}catch(e){}h("fail");return}if(t!==s){try{let e=await fetch("/api/tests/by-hash?hash=".concat(encodeURIComponent(s)));if(e.ok){let t=await e.json(),s=null==t?void 0:t.id;if(s){p.push("/result/".concat(encodeURIComponent(s)));return}}}catch(e){}h("fail");return}h("ok"),p.push("/results")}catch(e){h("fail")}}async function N(){try{let e=localStorage.getItem("gz_domain_results");if(!e||!JSON.parse(e)[c]){m("fail");return}m("ok");let t=new URL(window.location.origin+"/results");t.searchParams.set("dh",c),p.push(t.toString())}catch(e){m("fail")}}async function j(e){var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s)try{let e=await s.text(),t=JSON.parse(e),a=(Array.isArray(t)?t:t.results?t.results:[]).map(e=>({domain:e.domain,payload:e.payload}));localStorage.setItem("gz_full_results",JSON.stringify(a));let n=await (0,l.J)((0,i.hd)(a));localStorage.setItem("gz_full_hash",n);try{let e=localStorage.getItem("gz_full_runs"),t=e?JSON.parse(e):{};t[n]=a,localStorage.setItem("gz_full_runs",JSON.stringify(t))}catch(e){}try{await fetch("/api/runs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:n,results:a})})}catch(e){}o(n),h("ok"),p.push("/results")}catch(e){h("fail")}}return(0,a.jsxs)("main",{className:"app",children:[(0,a.jsxs)("div",{className:"question-row",style:{marginBottom:16},children:[(0,a.jsx)("div",{className:"q-left",children:(0,a.jsx)("span",{className:"domain-pill",children:"Welcome"})}),(0,a.jsx)("div",{className:"q-center",children:(0,a.jsx)("h1",{style:{margin:0},children:"Ground Zero â€” Per-Domain Assessment"})}),(0,a.jsx)("div",{className:"q-right",children:(0,a.jsx)("span",{className:"count-pill",children:"Start"})})]}),(0,a.jsxs)("div",{className:"row mt16",children:[(0,a.jsx)("button",{className:"btn".concat("run"===e?" selected":""),onClick:()=>t("run"),children:"Run"}),(0,a.jsx)("button",{className:"btn".concat("results"===e?" selected":""),onClick:()=>t("results"),children:"View results"})]}),"run"===e?(0,a.jsxs)("div",{className:"card",style:{marginTop:16},children:[(0,a.jsx)("p",{children:"Select how you want to run the assessment."}),(0,a.jsxs)("div",{className:"row",style:{marginTop:8},children:[(0,a.jsx)("a",{className:"btn",href:"/assessment",children:"Start Assessment"}),(0,a.jsx)("a",{className:"btn",href:"/full",children:"Full Test (All Domains)"})]})]}):(0,a.jsxs)("div",{className:"card",style:{marginTop:16},children:[(0,a.jsx)("p",{className:"muted",children:"Paste a suite hash or import a saved run to view results."}),(0,a.jsxs)("div",{className:"row mt16",style:{alignItems:"center"},children:[(0,a.jsx)("input",{value:s,onChange:e=>{o(e.target.value),h("idle")},placeholder:"Paste suite hash here",style:{flex:1,padding:8,borderRadius:8,border:"1px solid var(--border)",background:"#0f141a",color:"var(--text)"}}),(0,a.jsx)("button",{className:"btn",onClick:y,children:"Load by hash"}),"ok"===d?(0,a.jsx)("span",{className:"badge high",children:"Verified"}):null,"fail"===d?(0,a.jsx)("span",{className:"badge low",children:"Not found"}):null]}),(0,a.jsxs)("div",{className:"row mt16",style:{alignItems:"center"},children:[(0,a.jsx)("input",{value:c,onChange:e=>{u(e.target.value),m("idle")},placeholder:"Paste single domain hash here",style:{flex:1,padding:8,borderRadius:8,border:"1px solid var(--border)",background:"#0f141a",color:"var(--text)"}}),(0,a.jsx)("button",{className:"btn",onClick:N,children:"Load domain by hash"}),"ok"===f?(0,a.jsx)("span",{className:"badge high",children:"Found"}):null,"fail"===f?(0,a.jsx)("span",{className:"badge low",children:"Not found"}):null]}),(0,a.jsxs)("div",{className:"row mt16",children:[(0,a.jsx)("button",{className:"btn",onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},children:"Import results JSON"}),(0,a.jsx)("input",{ref:g,type:"file",accept:"application/json",className:"hidden",onChange:j})]})]}),(0,a.jsx)("div",{className:"footer-note",children:"Local, offline. Your data stays in the browser until you export."})]})}},2931:function(e,t,s){"use strict";function a(e){let t=new WeakSet,s=e=>{if(null===e||"object"!=typeof e)return JSON.stringify(e);if(t.has(e))throw TypeError("circular");return(t.add(e),Array.isArray(e))?"["+e.map(e=>s(e)).join(",")+"]":"{"+Object.keys(e).sort().map(t=>JSON.stringify(t)+":"+s(e[t])).join(",")+"}"};return s(e)}function n(e){return Math.round((e-1)/4*1e3)/10}function r(e){return e>=4?"high":e<=2?"low":"neutral"}function l(e){return e>=4?"high":e<=2?"low":"medium"}s.d(t,{KL:function(){return l},Md:function(){return n},_0:function(){return r},hd:function(){return a}})},5332:function(e,t,s){"use strict";async function a(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}s.d(t,{J:function(){return a}})},2761:function(e,t,s){"use strict";var a=s(4032);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[677,14,744],function(){return e(e.s=6723)}),_N_E=e.O()}]);