(()=>{var e={};e.id=588,e.ids=[588],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2496:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>f,tree:()=>c}),n(7219),n(4052),n(6853);var r=n(4010),s=n(1413),a=n(5054),i=n.n(a),l=n(4191),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);n.d(t,o);let c=["",{children:["full",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,7219)),"C:\\ground-zero-standalone\\app\\full\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,4052)),"C:\\ground-zero-standalone\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,6853,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\ground-zero-standalone\\app\\full\\page.tsx"],d="/full/page",p={require:n,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/full/page",pathname:"/full",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9965:(e,t,n)=>{Promise.resolve().then(n.bind(n,3270))},3270:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(577),s=n(1183),a=n(7173);function i(){let[e,t]=(0,s.useState)(null);return e?"p1"===e.kind?r.jsx(l,{ui:e,onSubmit:async e=>{try{let n=await fetch("/api/assessment/p1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok||!(n.headers.get("content-type")||"").includes("application/json"))return;let r=await n.json();r?.ui&&t({kind:"p2",...r.ui})}catch{}}}):"p2"===e.kind?r.jsx(o,{ui:e,onSubmit:async e=>{try{let n=await fetch("/api/assessment/p2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:e})});if(!n.ok||!(n.headers.get("content-type")||"").includes("application/json"))return;let r=await n.json();r?.ui&&t({kind:"p3",...r.ui})}catch{}}}):"p3"===e.kind?r.jsx(c,{ui:e,onSubmit:async e=>{try{let n=await fetch("/api/assessment/p3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asked:e})});if(!n.ok||!(n.headers.get("content-type")||"").includes("application/json"))return;let r=await n.json();if(r?.step==="done"){window.location.href=r.redirect;return}r?.ui&&t({kind:"p1",...r.ui})}catch{}}}):null:r.jsx("div",{className:"card",children:"Loading…"})}function l({ui:e,onSubmit:t}){let[n,i]=(0,s.useState)(1),[l,o]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[d,p]=(0,s.useState)([]),f=e.facets,m=Object.fromEntries(f.map(e=>[e,l.includes(e)?1:0])),x=Object.fromEntries(f.map(e=>[e,c.includes(e)?1:0])),h=(0,a.pu)(m,x,e.domain);(0,s.useEffect)(()=>{p(e=>e.filter(e=>h.includes(e)))},[h.join(",")]);let j=1===n?3:2===n?2:Math.min(2,h.length),g=1===n?e.facets:2===n?l:h,y=(e,t,n,r)=>{t(e.includes(n)?e.filter(e=>e!==n):e.length<r?e.concat(n):e)},b=()=>{t({picksP:m,picksM:x,picksT:Object.fromEntries(f.map(e=>[e,d.includes(e)?1:0]))})};return(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{children:e.label}),r.jsx("p",{children:1===n?e.prompts.q1:2===n?e.prompts.q2:e.prompts.q3}),r.jsx("div",{className:"facet-grid",children:g.map(e=>r.jsx("button",{className:"btn-chip"+(1===n?l.includes(e)?" selected":"":2===n?c.includes(e)?" selected":"":d.includes(e)?" selected":""),onClick:()=>1===n?y(l,o,e,3):2===n?y(c,u,e,2):y(d,p,e,j),children:e},e))}),(0,r.jsxs)("div",{className:"row mt16",style:{justifyContent:"space-between"},children:[n>1?r.jsx("button",{className:"ghost",onClick:()=>i(e=>e-1),children:"Back"}):r.jsx("span",{}),r.jsx("button",{className:"primary",disabled:(1===n?l:2===n?c:d).length!==j,onClick:()=>n<3?i(e=>e+1):b(),children:n<3?"Next":"Continue"})]})]})}function o({ui:e,onSubmit:t}){let[n,a]=(0,s.useState)(0),[i,l]=(0,s.useState)([]),o=(0,s.useRef)(!1),c=Array.isArray(e.queue)?e.queue:[];if(n>=c.length)return o.current||(o.current=!0,t(i)),null;let u=c[n];return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{children:[e.label," — Phase 2"]}),r.jsx("p",{children:r.jsx("b",{children:u.facet})}),r.jsx("div",{className:"card",style:{borderStyle:"dashed"},children:u.prompt}),r.jsx("div",{className:"row mt16",children:[{text:"Very Inaccurate",val:1},{text:"Moderately Inaccurate",val:2},{text:"Neutral",val:3},{text:"Moderately Accurate",val:4},{text:"Very Accurate",val:5}].map(e=>r.jsx("button",{className:"rate btn",onClick:()=>{l(t=>t.concat({facet:u.facet,idx:u.idx,value:e.val})),a(n+1)},children:e.text},e.val))})]})}function c({ui:e,onSubmit:t}){let[n,a]=(0,s.useState)(0),[i,l]=(0,s.useState)([]),o=(0,s.useRef)(!1);if(n>=e.confirmers.length)return o.current||(o.current=!0,t(i)),null;let c=e.confirmers[n];return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{children:[e.label," — Confirm"]}),r.jsx("div",{className:"card",style:{borderStyle:"dashed"},children:c.question}),r.jsx("div",{className:"row mt16",children:["Yes","No","Maybe"].map(e=>r.jsx("button",{className:"rate btn",onClick:()=>{l(t=>t.concat({facet:c.facet,answer:e})),a(n+1)},children:e},e))})]})}function u(){return r.jsx("main",{className:"full-center",children:r.jsx(i,{})})}},7173:(e,t,n)=>{"use strict";n.d(t,{Dx:()=>u,J6:()=>i,RA:()=>c,Tq:()=>a,ii:()=>o,pu:()=>s});var r=n(5196);function s(e,t,n){let s=(0,r.UX)(n),a=function(e,t,n){let r=Object.fromEntries(n.map(n=>[n,2*(e[n]||0)-2*(t[n]||0)]));return Object.fromEntries(n.map(n=>{let s=2-Math.abs(r[n]);return 0===(e[n]||0)&&(s+=.5),1===(t[n]||0)&&(s+=.5),[n,s]}))}(e,t,s),i=[];i=(i=i.concat(s.filter(n=>1===(e[n]||0)&&1===(t[n]||0)))).concat(s.filter(n=>0===(e[n]||0)&&0===(t[n]||0)));let l=s.filter(e=>!i.includes(e)).sort((e,t)=>a[t]-a[e]||s.indexOf(e)-s.indexOf(t));if((i=Array.from(new Set(i.concat(l)))).length>4&&(i=i.slice(0,4)),i.length<2){for(let e of s)if(i.includes(e)||i.push(e),i.length>=2)break}return i}function a(e,t,n,r){return Object.fromEntries(r.map(r=>[r,2*(e[r]||0)+1*(t[r]||0)-2*(n[r]||0)]))}function i(e,t){let n=Object.fromEntries(t.map(e=>[e,1])),r=t.map(t=>Math.max(0,e[t]||0)),s=r.reduce((e,t)=>e+t,0),a=Math.min(12,Math.max(6,6+s))-6,i=[...t].sort((e,n)=>{let s=r[t.indexOf(n)]-r[t.indexOf(e)];return 0!==s?s:e.localeCompare(n)});for(;a>0;){for(let e of i){if(0===a)break;r[t.indexOf(e)]>0&&(n[e]+=1,a-=1)}if(0===s)break}return n}function l(e){return Math.min(Math.abs(e-2.36),Math.abs(e-3.64))}function o(e,t,n){return(0,r.UX)(n).filter(n=>{let r=e[n];if(null==r)return!1;let s=r>=4&&0>=(t[n]||0)||r<=2&&(t[n]||0)>=1;return .06>l(r)||s})}function c(e,t){return e<2.36?"Low":e>=3.64?"High":"Medium"}function u(e,t,n,r){let s={...e},a={};for(let{facet:e,answer:t}of r)a[e]||(a[e]={yes:0,no:0}),"Yes"===t&&(a[e].yes+=1),"No"===t&&(a[e].no+=1);for(let[e,{yes:n,no:r}]of Object.entries(a)){let a=t[e];null!=a&&!(l(a)>.06)&&(n>r?s[e]=a>=3?"High":"Medium":r>n&&(s[e]=a<=3?"Low":"Medium"))}return s}},7219:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});var r=n(1137);let s=(0,r.createProxy)(String.raw`C:\ground-zero-standalone\app\full\page.tsx`),{__esModule:a,$$typeof:i}=s;s.default;let l=(0,r.createProxy)(String.raw`C:\ground-zero-standalone\app\full\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[857,824,299],()=>n(2496));module.exports=r})();